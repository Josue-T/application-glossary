<?xml version='1.1' encoding='UTF-8'?>
<xwikidoc version="1.3" reference="GlossaryCode.GlossaryHomeSheet" locale="">
  <web>GlossaryCode</web>
  <name>GlossaryHomeSheet</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>XWiki.sgc_072</creator>
  <creationDate>1497876709000</creationDate>
  <parent>GlossaryCode.GlossaryHomeClass</parent>
  <author>XWiki.sgc_072</author>
  <contentAuthor>XWiki.sgc_072</contentAuthor>
  <date>1502714602000</date>
  <contentUpdateDate>1502714602000</contentUpdateDate>
  <version>3.15</version>
  <title>#if($doc.name == 'GlossaryHomeSheet')Glossary Home Sheet#{else}$services.display.title($doc, {'displayerHint': 'default'})#end</title>
  <comment/>
  <minorEdit>true</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>true</hidden>
  <content>{{velocity}}&#xd;
#set($discard = $xwiki.ssfx.use('uicomponents/pagination/pagination.css', 'true'))&#xd;
#set($glossaryHome = $doc.getObject("GlossaryCode.GlossaryHomeClass"))&#xd;
&#xd;
#if($glossaryHome)&#xd;
  ## Don't display doc extra tabs for Glossary home pages&#xd;
  #set($docextras=[])&#xd;
 $doc.use("GlossaryCode.GlossaryHomeClass")&#xd;
 $xwiki.jsx.use('GlossaryCode.SkinExtension')&#xd;
 $xwiki.ssx.use('GlossaryCode.SkinExtension')&#xd;
&#xd;
 ## The space where to add and search for Glossary Entries&#xd;
 #set ($glossarySpace = $doc.space)&#xd;
 ## If this page is called with createGlossary=true then create a new page using the GlossaryTemplate template&#xd;
  #if ($request.createGlossary == 'true')&#xd;
    ## Remove the "?" if it's the last character since the Glossary sheet adds one automatically&#xd;
    #set ($glossaryItem = $stringtool.stripEnd($stringtool.trim($!{request.glossaryItem}), '?'))&#xd;
    ## If there's no glossaryItem then issue a warning below&#xd;
    #if (!$stringtool.isBlank($glossaryItem))&#xd;
 #set ($newGlossaryReference = $services.model.createDocumentReference('', '', "$glossaryItem"))&#xd;
 $response.sendRedirect($xwiki.getURL($newGlossaryReference, 'inline', "$!{request.queryString}&amp;title=${escapetool.url($glossaryItem)}"))&#xd;
&#xd;
    #end&#xd;
  #end&#xd;
&#xd;
#set ($description = $doc.getValue("description"))&#xd;
  #if ("$!description" != "")&#xd;
    {{box cssClass="glossaryAbout"}}&#xd;
      $doc.display("description")&#xd;
    {{/box}}&#xd;
  #end&#xd;
   &#xd;
##Adding the Search box on main page.&#xd;
(% class="glossary-link search-glossary box" %)(((&#xd;
=== #if($services.icon)$services.icon.render('find')#end $services.localization.render('glossary.search.title') ===&#xd;
(((&#xd;
&#xd;
{{html}}&#xd;
  &lt;form action="$xwiki.getURL('Glossary.SearchGlossary')" class="xformInline">&#xd;
 &lt;div>&#xd;
    ## Lucene search needs the $request.space param&#xd;
    &lt;input type="hidden" name="space" value="${glossarySpace}" />&#xd;
    ## Lucene search needs the $request.wikinames param&#xd;
    &lt;input type="hidden" name="wikinames" value="${xcontext.database}" />&#xd;
    ## Both Lucene and SOLR searches obey the $request.text param&#xd;
    &lt;input type="text" name="text" value="$services.localization.render('glossary.search.text')" size="16" class="withTip"/>&#xd;
 &#xd;
&lt;span class="buttonwrapper">&#xd;
        &lt;input class="button" type="submit" value="$services.localization.render('glossary.search.submit')" />&#xd;
      &lt;/span>&#xd;
  &lt;/div>&#xd;
     &lt;/form>&#xd;
    {{/html}}&#xd;
  )))&#xd;
)))&#xd;
(% class="glossary-link add-glossary box" %)(((&#xd;
##Adding 'Add Glossary' button on the main page&#xd;
=== #if($services.icon)$services.icon.render('add')#end $services.localization.render('glossary.add.title') ===&#xd;
(((&#xd;
&#xd;
{{html wiki = "true"}}&#xd;
#if ($isGuest)&#xd;
      #set($login = ${escapetool.xml($doc.getURL("login", "xredirect=$doc.externalURL"))})&#xd;
      #set($register = ${escapetool.xml($xwiki.getURL($services.model.resolveDocument('', 'default'), "register", "xredirect=$doc.externalURL"))})&#xd;
      $services.localization.render('platform.glossary.need', ["&lt;a href=$login>","&lt;/a>","&lt;a href=$register>","&lt;/a>"])&#xd;
    #else&#xd;
 &lt;form action="$doc.getURL()" id="newglossary" class="xformInline">&#xd;
        &lt;div>&#xd;
          &lt;input type="hidden" name="parent" value="${glossarySpace}.WebHome" />&#xd;
          &lt;input type="hidden" name="template" value="GlossaryCode.GlossaryTemplate" />&#xd;
          &lt;input type="hidden" name="createGlossary" value="true" />&#xd;
          #if ($request.createGlossary == 'true' &amp;&amp; $stringtool.isBlank($glossaryItem))&#xd;
            {{error}}$services.localization.render('platform.glossary.create.empty'){{/error}}&#xd;
          #end&#xd;
          &lt;input class="withTip" type="text" name="glossaryItem" value="$services.localization.render('glossary.add.searchHint')" size="16"/>&#xd;
          &lt;span class="buttonwrapper">&#xd;
            &lt;input class="btn btn-success button" type="submit" value="$services.localization.render('glossary.add.submit')" />&#xd;
          &lt;/span>&#xd;
        &lt;/div>&#xd;
      &lt;/form>&#xd;
    #end&#xd;
{{/html}}&#xd;
)))&#xd;
)))&#xd;
&#xd;
 (% class="clearfloats" %)((()))(%%)&#xd;
&#xd;
#end&#xd;
&#xd;
</content>
</xwikidoc>